{"version":3,"sources":["Observables/Store.js","components/LoadingCircle.js","components/UploadProgress.js","utilities/FilterOutIconsToRender.js","utilities/index.js","api/API.js","components/DropdownItems.js","components/PortalCopy.js","utilities/GlobalStyle.js","components/PortalDelete.js","components/PortalRename.js","components/FileItemDropdown.js","components/FileItem.js","components/UploadFile.js","components/LogoutButton.js","components/NewFolder.js","components/SideBar.js","components/BreadCrumbs.js","components/FileList.js","components/Favorites.js","components/MainPage.js","components/LoginPage.js","constants/constants.js","components/Auth.js","App.js","index.js"],"names":["token$","BehaviorSubject","localStorage","getItem","updateToken","newToken","setItem","removeItem","next","favorites$","JSON","parse","toggleFavorite","file","newFavorites","value","find","x","id","filter","fav","stringify","rotateRight","keyframes","rotateLeft","Container","styled","aside","LoadingCircle","props","className","style","transform","scale","div","UploadProgress","info","name","size","Math","round","console","log","uploadedSize","uploadDone","displayDone","aria-hidden","onClick","setDisplayDone","filterOutIconsToRender","tag","addPathForEach","path","parts","split","newPath","map","part","i","slice","join","removeEndOfPathname","splittedPath","length","fetchDataFromUser","token","Dropbox","accessToken","fetch","filesListFolder","then","response","entries","replace","catch","err","error","getCursor","filesListFolderGetLatestCursor","recursive","include_media_info","include_deleted","include_has_explicit_shared_members","include_mounted_folders","DropdownItems","displayDelete","displayRename","displayCopy","displayMove","dbx","is_downloadable","filesGetTemporaryLink","path_lower","window","location","href","link","Download","width","CopyFile","useState","setToken","files","state","updateState","loading","setLoading","updatePath","setError","useEffect","subscription","subscribe","unsubscribe","loadingReturn","handlePath","finally","getPath","key","changeURL","ReactDOM","createPortal","innerWidth","copy","color","e","onReturn","pathFix","filesCopy","from_path","to_path","autorename","filesMove","document","getElementById","GlobalStyle","createGlobalStyle","mask","PortalDelete","filesDelete","deleteFilesAndFolders","PortalRename","input","setInput","inputRef","useRef","current","focus","subsription","displayNotification","boolean","onSubmit","preventDefault","newName","filesMoveV2","renameFiles","data","ref","placeholder","type","onChange","target","FileItemDropdown","dropdown","setDropdown","deleteFiles","setDeleteFiles","rename","setRename","setCopy","move","setMove","clickedEl","addEventListener","clickedInside","removeEventListener","contains","isFolderIcon","FileItem","pathname","children","starState","updateStarState","modified","setModified","setSize","url","updateUrl","updateStar","unmounted","filesGetMetadata","getFilesMetadata","metadata","server_modified","dataFormat","filesGetThumbnail","getFilesThumbnail","res","URL","createObjectURL","fileBlob","substring","lastIndexOf","toggleCheck","iso","to","src","iconsToRender","Star","StarBorder","moment","format","bytes","decimals","k","dm","sizes","floor","parseFloat","pow","toFixed","convertToHumanReadableSize","UploadFile","updateFile","largeFileUpload","updateLargeFileUpload","idx","setIdx","setInfo","items","setItems","setUploadedSize","setUploadDone","usepath","repsonse","maxBlob","multiple","toggleModal","dropbox","workItems","offset","chunkSize","min","push","reduce","acc","blob","filesUploadSessionStart","close","contents","session_id","sessionId","cursor","filesUploadSessionAppendV2","commit","mode","mute","filesUploadSessionFinish","Promise","resolve","LogoutButton","NewFolder","inputName","setInputName","folderNameChange","onClickToggle","filesCreateFolder","SideBar","newFolder","setNewFolder","toggle","updateToggle","onFolderClick","handleToggle","BreadCrumbs","crumb","word","toUpperCase","FileList","list","updateCursor","longpoll","timeout","filesListFolderLongpoll","checkChanges","changes","section","Favorites","starItems","updateStarItems","toggleStar","MainPage","searchFile","updateSearchFile","updateList","useDebounce","searchItems","filesSearch","query","matches","Search","LoginPage","clientId","getAuthenticationUrl","fetchAccessesTokenFromUser","Auth","queryString","hash","App","exact","component","render"],"mappings":"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","file":"static/js/main.eb411928.chunk.js","sourcesContent":["import { BehaviorSubject } from \"rxjs\";\r\n\r\nexport const token$ = new BehaviorSubject(localStorage.getItem(\"token\"));\r\n\r\nexport function updateToken(newToken) {\r\n    if (newToken) { //Truthy === token is set. Otherwise token is null === falsy.\r\n        localStorage.setItem(\"token\", newToken);\r\n\r\n    } else {\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n    token$.next(newToken);\r\n}\r\n\r\nexport let favorites$ = new BehaviorSubject(JSON.parse(localStorage.getItem(\"starred\") || \"[]\"));\r\n\r\nexport function toggleFavorite(file) {\r\n    let newFavorites = [...favorites$.value];\r\n\r\n    if (newFavorites.find(x => x.id === file.id)) {\r\n        newFavorites = newFavorites.filter(fav => fav.id !== file.id);\r\n    } else {\r\n        newFavorites = [...newFavorites, file];\r\n    }\r\n\r\n    localStorage.setItem(\"starred\", JSON.stringify(newFavorites));\r\n    favorites$.next(newFavorites);\r\n}\r\n\r\nexport function removeStarItems() {\r\n    localStorage.removeItem(\"starred\");\r\n}","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst rotateRight = keyframes`\r\n  from{\r\n    transform: rotate(0deg);\r\n  }\r\n  to{\r\n    transform: rotate(360deg);\r\n  }\r\n`\r\n\r\nconst rotateLeft = keyframes`\r\n  from{\r\n    transform: rotate(0deg);\r\n  }\r\n  to{\r\n    transform: rotate(-360deg);\r\n  }\r\n`\r\n\r\n\r\nconst Container = styled.aside`\r\n  #spinnerBig{\r\n    width: 50px;\r\n    height: 25px; \r\n    border-top-left-radius: 60px; \r\n    border-top-right-radius: 60px;\r\n    border: 4px solid #92ceff;\r\n    border-bottom: 0;\r\n  }\r\n  #spinnerSmall{\r\n    width: 40px;\r\n    height: 20px; \r\n    border-top-left-radius: 30px; \r\n    border-top-right-radius: 30px;\r\n    border: 4px solid #92ceff;\r\n    border-bottom: 0;\r\n  }\r\n  .spinRight{\r\n    position: absolute;\r\n    display:flex;\r\n    justify-content: flex-start;\r\n    width:50px;\r\n    height:50px;\r\n    animation: ${rotateRight} .6s linear infinite;\r\n  }\r\n  .spinLeft{\r\n    display:flex;\r\n    justify-content: flex-start;\r\n    width:35px;\r\n    height:35px;\r\n    animation: ${rotateLeft} .5s linear infinite;\r\n  }\r\n  .putTogether{\r\n    position: relative;\r\n    left: -10px;\r\n    display:flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n`\r\n// !!! Send prop \"scale\" to change scale of component !!!\r\nfunction LoadingCircle(props){\r\n  return(\r\n    <Container>\r\n      <div className=\"putTogether\" style={{transform: \"scale(\"+props.scale+\",\"+props.scale+\")\"}}>\r\n        <div className=\"spinRight\">\r\n          <div id=\"spinnerBig\"></div>\r\n        </div>\r\n        <div className=\"spinLeft\">\r\n          <div id=\"spinnerSmall\"></div>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  )\r\n  \r\n}\r\n\r\nexport default LoadingCircle;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport LoadingCircle from '../components/LoadingCircle'\r\n\r\nconst Container = styled.div`\r\n  .progressContainer{\r\n    position: fixed;\r\n    left: 20%;\r\n    bottom: 25px;\r\n    width: 70%;\r\n    height: 50px;\r\n    background: #f7f9fa;\r\n    -webkit-box-shadow: 0px 0px 5px 3px rgba(207,203,207,1);\r\n    -moz-box-shadow: 0px 0px 5px 3px rgba(207,203,207,1);\r\n    box-shadow: 0px 0px 5px 3px rgba(207,203,207,1);\r\n    display: flex;\r\n    justify-content: center;\r\n    aligen-items: center;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .fileName{\r\n    margin: 5px;\r\n  }\r\n\r\n  .fileSize{\r\n    margin: 5px;\r\n  }\r\n\r\n  .closeBtn{\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    color: #0070e0;\r\n  }\r\n\r\n  .closeBtn:hover{\r\n    color: #92ceff;\r\n  }\r\n\r\n  .fa-check{\r\n    margin: 8px;\r\n    color: #0070e0;\r\n  }\r\n`;\r\n\r\nfunction UploadProgress(props) {\r\n\r\n  let { name, size } = props.info;\r\n  size = Math.round(size * 0.001);\r\n  console.log(\"test\", props.uploadedSize)\r\n\r\n  function handleClose(){\r\n    props.setDisplayDone(!props.displayDone);\r\n  }\r\n\r\n  return(\r\n    <Container>\r\n      {!props.uploadDone ? <div className='progressContainer'>\r\n        <LoadingCircle scale={0.3} />\r\n        <span className='fileName'>Uploading  {name}</span>\r\n        <span className='fileSize'>{props.uploadedSize}/{size} KB</span>\r\n      </div>: null}\r\n      {props.displayDone ? <div className='progressContainer'>\r\n        <i className=\"fa fa-check\" aria-hidden=\"true\"></i>\r\n        <span className='fileName'>Uploading  {name} complete!</span>\r\n        <span className='closeBtn' onClick={handleClose}>Close</span>\r\n      </div>: null}\r\n\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default UploadProgress;\r\n","export const filterOutIconsToRender = (tag) => {\r\n  if (tag === 'folder') {\r\n    return 'folder';\r\n  } else {\r\n    return 'insert_drive_file'; // if nothing else matches\r\n  }\r\n}","import moment from 'moment';\r\nimport { PATH_BASENAME } from \"../constants/constants\";\r\nimport { filesListFolder } from \"../api/API\";\r\nimport { toggleFavorite, favorite$ } from \"../Observables/Store\";\r\n\r\nexport function stringToArrBreadCrumbs(str) {\r\n  str = PATH_BASENAME + str; //Gjort en konstant som kan användas för path basename.\r\n  let arr = str.split(\"/\");\r\n\r\n  return arr;\r\n}\r\n\r\nexport function returnRightPath(str, path) {\r\n  let arr = stringToArrBreadCrumbs(path);\r\n\r\n  let index = arr.indexOf(str);\r\n  let uncutPath = arr.slice(0, index + 1).join(\"/\");\r\n  let regEx = /home/i;\r\n  let returnPath = uncutPath.replace(regEx, \"\");\r\n  return returnPath;\r\n}\r\n\r\nexport const convertToHumanReadableSize = (bytes, decimals = 2) => {\r\n\r\n  if (!bytes) return '';\r\n\r\n  const k = 1024;\r\n  const dm = decimals < 0 ? 0 : decimals;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n}\r\n\r\nexport const convertToHumanReadableTime = (iso) => {\r\n  return moment(iso).format('YYYY-MM-DD HH:mm:ss');\r\n}\r\n\r\nexport function addPathForEach(path) {\r\n  let parts = path.split(\"/\");\r\n  let newPath = parts.map((part, i) => ({ part, path: parts.slice(0, i + 1).join(\"/\") }));\r\n  newPath = newPath.slice(1);\r\n  return newPath\r\n}\r\n\r\nexport function addStarredItems(path, name, token) {\r\n  let starred = localStorage.getItem(\"starred\");\r\n  starred = JSON.parse(starred);\r\n  filesListFolder(token, path === \"/home\" ? \"\" : path.slice(5))\r\n    .then((response) => {\r\n\r\n      let newStar = response.entries.filter(file => file.name === name)\r\n      console.log(newStar)\r\n      if (starred.find(x => x.name === newStar[0].name)) {\r\n        starred = starred.filter(x => x.name !== name);\r\n        toggleFavorite(newStar[0]);\r\n\r\n      } else {\r\n        starred.push(newStar[0])\r\n        toggleFavorite(newStar[0]);\r\n      }\r\n      console.log(starred);\r\n    })\r\n}\r\n\r\nexport function firstLetterCapital(word) {\r\n\r\n  let newWord = word.toUpperCase().slice(0, 1) + word.slice(1);\r\n  return newWord;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* // Ta bort?!\r\nexport function removeStarredItem(name) {\r\n  let starItems = JSON.parse(localStorage.getItem(\"starred\"));\r\n\r\n  starItems = starItems.filter(x => x.name !== name);\r\n\r\n  localStorage.setItem(\"starred\", JSON.stringify(starItems));\r\n  // Detta ok? gör samma som RxJs nu, tror jag.\r\n  // Bättre att säga att starItems === favorites$?\r\n} */\r\n\r\nexport function removeEndOfPathname(path) {\r\n  let splittedPath = path.split(\"/\");\r\n  let newPath = \"\";\r\n  for (let i = 1; i < splittedPath.length - 1; i++) {\r\n    if (i !== splittedPath.length || splittedPath !== \"\") {\r\n      newPath += \"/\" + splittedPath[i];\r\n    }\r\n  }\r\n  return newPath\r\n}","import { CLIENT_ID } from '../constants/constants';\r\nimport { Dropbox } from 'dropbox'\r\nimport { removeEndOfPathname } from '../utilities/index';\r\n\r\nexport const fetchDataFromUser = (token) => {\r\n  let dbx = new Dropbox({ accessToken: token, fetch });\r\n\r\n  return dbx.filesListFolder({ path: '' })\r\n    .then(function (response) {\r\n      console.log(response);\r\n      return response.entries;\r\n    });\r\n}\r\n\r\nexport const fetchAccessesTokenFromUser = () => {\r\n  var dbx = new Dropbox({ clientId: CLIENT_ID, fetch: fetch });\r\n  const url = dbx.getAuthenticationUrl(\"http://localhost:3000/auth\");\r\n\r\n  window.location.href = url;\r\n}\r\n\r\nexport const filesListFolder = (token, path) => {\r\n  let newPath = path.replace(/%20/g, \" \");\r\n\r\n  let dbx = new Dropbox({ accessToken: token, fetch: fetch });\r\n  return dbx.filesListFolder({ path: newPath === \"/\" ? \"\" : newPath })\r\n    .then((response) => {\r\n      console.log(response);\r\n      return response;\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    })\r\n}\r\n\r\nexport function Download(file, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n  if (file.is_downloadable === true) {\r\n    dbx.filesGetTemporaryLink({ path: file.path_lower })\r\n      .then((response) => {\r\n        window.location.href = response.link;\r\n      })\r\n  }\r\n}\r\n\r\nexport function createFolder(path, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n  console.log(path);\r\n  dbx.filesCreateFolder({ path: path })\r\n    .then((response) => {\r\n      console.log(response);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n}\r\n\r\nexport function deleteFilesAndFolders(path, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n\r\n  return dbx.filesDelete({ path })\r\n}\r\n// Någon bugg där namn med endast siffror skapar felkod: 409\r\nexport function getFilesMetadata(path, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n\r\n  return dbx.filesGetMetadata({ path })\r\n}\r\n\r\nexport function getFilesThumbnail(path, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n\r\n  return dbx.filesGetThumbnail({ path })\r\n}\r\n\r\nexport function checkChanges(cursor, timeout, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch, })\r\n\r\n  return dbx.filesListFolderLongpoll({ cursor: cursor, timeout: timeout })\r\n}\r\n\r\nexport function filesListFolderContinue(path, token) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n  return dbx.fileRequestsListContinue({ path: path });\r\n}\r\n\r\nexport function getCursor(token, path) {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch });\r\n\r\n  return dbx.filesListFolderGetLatestCursor({\r\n    path,\r\n    recursive: false,\r\n    include_media_info: false,\r\n    include_deleted: true,\r\n    include_has_explicit_shared_members: false,\r\n    include_mounted_folders: false\r\n  });\r\n}\r\nexport const renameFiles = (path, newName, token) => {\r\n  const dbx = new Dropbox({ accessToken: token, fetch: fetch })\r\n\r\n  return dbx.filesMoveV2({\r\n    from_path: path,\r\n    to_path: `${removeEndOfPathname(path)}/${newName}`,\r\n  })\r\n}\r\n","import React from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nimport { Download } from \"../api/API\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 170px;\r\n  top: 32px;\r\n  right: 15px;\r\n  border: 1px solid #e6e8eb;\r\n  border-radius: 4px;\r\n  background-color: #fff;\r\n  z-index: 1;\r\n\r\n  .trigger-action {\r\n    padding: 5px;\r\n\r\n    :hover {\r\n      color: #92ceff;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function DropdownItems({ file, displayDelete, displayRename, displayCopy, displayMove}) {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const deleteFiles = () => {\r\n    displayDelete(true);\r\n  }\r\n\r\n  const renameFiles = () => {\r\n    displayRename(true);\r\n  }\r\n\r\n  const copyFiles = () => {\r\n    displayCopy(true);\r\n  }\r\n\r\n  const moveFiles = () => {\r\n    displayMove(true);\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <div className=\"trigger-action\" onClick={() => Download(file, token)}>Download</div>\r\n      <div className=\"trigger-action\" onClick={deleteFiles}>Delete</div>\r\n      <div className=\"trigger-action\" onClick={copyFiles}>Copy</div>\r\n      <div className=\"trigger-action\" onClick={renameFiles}>Rename</div>\r\n      <div className=\"trigger-action\" onClick={moveFiles}>Move</div>\r\n    </Container>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\"\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { Dropbox } from 'dropbox';\r\n\r\nimport { filterOutIconsToRender } from \"../utilities/FilterOutIconsToRender\";\r\nimport { filesListFolder, fetchDataFromUser } from \"../api/API\";\r\nimport { token$, toggleFavorite } from '../Observables/Store';\r\n\r\nimport FileItem from \"./FileItem\";\r\nimport LoadingCircle from \"./LoadingCircle\";\r\n\r\nconst Container = styled.aside`\r\n  .shadow{\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: ${props => props.width + 'px'};\r\n    height: 100%;\r\n    background-color: rgba(14, 37, 52, 0.15);\r\n    z-index: 1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .row{\r\n    display:flex;\r\n  }\r\n  .column{\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .left{\r\n    margin-left: 20px;\r\n  }\r\n  .input{\r\n    width: 90%;\r\n    padding: 5px;\r\n    border: 1px solid black;\r\n    border-radius: 5px;\r\n  }\r\n  .miniTitle{\r\n    margin-bottom: 5px;\r\n    color: grey;\r\n    font-size: 14px;\r\n  }\r\n  .border{\r\n    width: 400px;\r\n    height: 500px;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n  }\r\n  .icon-container{\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .data-format {\r\n    font-size: 35px;\r\n    padding-left: 12px;\r\n    color: #92ceff;\r\n    margin-top: 15px;\r\n    margin-left: 8px;\r\n    margin-right: 10px;\r\n  }\r\n  .myFooter{\r\n    display:flex;\r\n    jusitfy-content: flex-start;\r\n    align-items: center;\r\n    width:100%;\r\n    height: 60px;\r\n    position: relative;\r\n    border-radius: 0px 0px 10px 10px;\r\n    border-top: 1px solid rgba(222, 222, 222, 1);\r\n    background-color: rgba(245, 245, 245, 1);\r\n    z-index: 2;\r\n  }\r\n  .btn{\r\n    width: 100px;\r\n    height: 40px;\r\n    margin-left: 10px;\r\n    border: 0.5px solid gray;\r\n    border-radius: 10px;\r\n  }\r\n  .create{\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n    margin-right: 15px;\r\n  }\r\n  .cancel{\r\n    margin-left: 180px;\r\n    background-color: white;\r\n  }\r\n  .upload{\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n  }\r\n  .overFlow{\r\n    position: relative;\r\n    overflow-y:scroll;\r\n    overflow-x:hidden;\r\n    height: 300px;\r\n    display:flex;\r\n    flex-direction: column;\r\n  }\r\n  .center{\r\n    height: 300px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .flex-container {\r\n    margin-left: 0px !important;\r\n    margin-right: 0px !important;\r\n  }\r\n  .metadata-container{\r\n    display:none;\r\n  }\r\n  .right-content{\r\n    display:none !important;\r\n  }\r\n  .MuiSvgIcon-root{\r\n    display:none !important;\r\n  }\r\n`;\r\n\r\nfunction CopyFile(props) {\r\n  const [token, setToken] = useState(token$.value);\r\n  const [state, updateState] = useState({\r\n    files: [],\r\n  })\r\n  const [loading, setLoading] = useState(true);\r\n  const [path, updatePath] = useState(\"/\");\r\n  const [error, setError] = useState(false);\r\n  useEffect(() => {\r\n    const subscription = token$.subscribe(setToken);\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const { displayCopy } = props;\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetchDataFromUser(token)\r\n      .then((response) => {\r\n        /* console.log(response) */\r\n        updateState({\r\n          files: response,\r\n        })\r\n        setLoading(false);\r\n      }).catch((err) => {\r\n        console.error(err);\r\n        setError(true);\r\n      })\r\n  }, [])\r\n\r\n  function handlePath(path) {\r\n    console.log(\"SHOULD LOAD\")\r\n    setLoading(true);\r\n    filesListFolder(token, path)\r\n      .then((response) => {\r\n        updateState({\r\n          files: response.entries\r\n        })\r\n        updatePath(path)\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      })\r\n\r\n  }\r\n\r\n  function onCopy() {\r\n    const dbx = new Dropbox({ accessToken: token, fetch });\r\n    setLoading(true);\r\n    let pathFix = path;\r\n    if (pathFix === \"/\") {\r\n      pathFix = \"\";\r\n    }\r\n    dbx.filesCopy(\r\n      {\r\n        from_path: props.file.path_lower,\r\n        to_path: pathFix + \"/\" + props.file.name,\r\n        autorename: true,\r\n      }\r\n    )\r\n      .then((response) => {\r\n        console.log(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n        displayCopy(false);\r\n      })\r\n  }\r\n\r\n  function onMove() {\r\n    const dbx = new Dropbox({ accessToken: token, fetch });\r\n    setLoading(true);\r\n    let pathFix = path;\r\n    if (pathFix === \"/\") {\r\n      pathFix = \"\";\r\n    }\r\n    toggleFavorite(props.file);\r\n    dbx.filesMove(\r\n      {\r\n        from_path: props.file.path_lower,\r\n        to_path: pathFix + \"/\" + props.file.name,\r\n        autorename: true,\r\n      }\r\n    )\r\n      .then((response) => {\r\n        console.log(response);\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n        displayCopy(false)\r\n      })\r\n  }\r\n\r\n\r\n  function onReturn(path) {\r\n    let splittedPath = path.split(\"/\");\r\n    let newPath = \"\";\r\n    for (let i = 1; i < splittedPath.length - 1; i++) {\r\n      if (i !== splittedPath.length || splittedPath !== \"\") {\r\n        newPath += \"/\" + splittedPath[i];\r\n      }\r\n    }\r\n    console.log(newPath);\r\n    handlePath(newPath)\r\n    updatePath(newPath);\r\n  }\r\n\r\n  let loadingReturn;\r\n  if (loading) {\r\n    loadingReturn = (<div className=\"center\"><LoadingCircle scale={1} /></div>)\r\n  } else {\r\n    loadingReturn = (<div className=\"overFlow\">\r\n      {state.files.filter((file) => file[\".tag\"] === \"folder\").map((x) => {\r\n        return <FileItem\r\n          files={state.files}\r\n          tag={x['.tag']}\r\n          getPath={handlePath}\r\n          path={x.path_lower}\r\n          file={x}\r\n          id={x.id}\r\n          key={x.id}\r\n          name={x.name}\r\n          token={token}\r\n          changeURL={false}\r\n        >{x.name}\r\n\r\n        </FileItem>;\r\n      })}\r\n    </div>)\r\n  }\r\n\r\n  return ReactDOM.createPortal(\r\n    <Container width={window.innerWidth}>\r\n      <div className=\"shadow\">\r\n        <div className=\"border\">\r\n          <header className=\"row\">\r\n            <i className=\"material-icons data-format folderIcon\">{filterOutIconsToRender(\"folder\", \"\")}</i>\r\n            <h3>{props.copy ? \"Copy file/folder\" : \"Move file/folder\"}</h3>\r\n          </header>\r\n          <div className=\"column left\">\r\n            <div>\r\n              <p className=\"miniTitle\">{props.copy ? \"Copy : \" + props.file.name : \"Move : \" + props.file.name}</p>\r\n              {error ? <p className=\"miniTitle\" style={{ color: \"red\" }}>Something went wrong, try again</p> : null}\r\n            </div>\r\n            <div>\r\n              <p className=\"miniTitle\">Location : Dropbox/home{path.replace(/%20/g, \" \")}</p>\r\n              {loadingReturn}\r\n            </div>\r\n          </div>\r\n          <footer className=\"myFooter\">\r\n            <button className=\"btn return\" onClick={(e) => onReturn(path)}>Return</button>\r\n            <button className=\"btn cancel\" onClick={() => displayCopy(false)}>Cancel</button>\r\n            <button className=\"btn create\" onClick={props.copy ? onCopy : onMove}>{props.copy ? \"Paste\" : \"Move\"}</button>\r\n          </footer>\r\n        </div>\r\n      </div>\r\n    </Container>,\r\n    document.getElementById('portal-copy')\r\n  )\r\n}\r\n\r\nexport default CopyFile","import { createGlobalStyle } from 'styled-components';\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n  body {\r\n    font-family: 'Heebo', sans-serif;\r\n    margin: 0;\r\n    padding: 0;\r\n    background: ${props => props.mask ? `rgba(14, 37, 52, 0.15) !important` : 'transparent'};\r\n\r\n    aside {\r\n      background: ${props => props.mask ? `rgba(14, 37, 52, 0.15) !important` : 'transparent'};\r\n    }\r\n  }\r\n`;","import React, { useEffect } from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport styled from 'styled-components';\r\n\r\nimport { deleteFilesAndFolders } from \"../api/API\";\r\nimport { GlobalStyle } from '../utilities/GlobalStyle';\r\nimport { favorites$, toggleFavorite } from \"../Observables/Store\";\r\n\r\nconst Container = styled.div`\r\n  position: fixed;\r\n  width: 370px;\r\n  height: 150px;\r\n  left: 50%;\r\n  margin-left: -185px;\r\n  top: 50%;\r\n  margin-top: -75px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  text-align: center;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n\r\n  footer {\r\n    display: flex;\r\n    justify-content: space-around;\r\n  }\r\n\r\n  .btn {\r\n    width: 100px;\r\n    height: 40px;\r\n    margin-bottom: 10px;\r\n    border: 0.5px solid gray;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .cancel {\r\n    background-color: white;\r\n  }\r\n\r\n  .delete {\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst PortalDelete = ({ displayDelete, file }) => {\r\n  const displayNotification = (boolean) => {\r\n    displayDelete(boolean)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const subscription = favorites$.subscribe()\r\n    return () => subscription.unsubscribe();\r\n  }, [])\r\n\r\n  const deleteItem = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    toggleFavorite(file);\r\n    deleteFilesAndFolders(file.path_lower, token)\r\n      .then(() => displayDelete(false))  // closes notification window\r\n  }\r\n\r\n  return ReactDOM.createPortal(\r\n    <Container>\r\n      <GlobalStyle mask={true} />\r\n      <header>\r\n        <p>Do you really want to remove the selected items?</p>\r\n      </header>\r\n      <footer>\r\n        <button className=\"btn delete\" onClick={deleteItem}>Delete</button>\r\n        <button className=\"btn cancel\" onClick={() => displayNotification(false)}>Cancel</button>\r\n      </footer>\r\n    </Container>,\r\n    document.getElementById('portal-delete')\r\n  )\r\n}\r\n\r\nexport default PortalDelete;","import React, { useState, useRef, useEffect } from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport styled from 'styled-components';\r\n\r\nimport { GlobalStyle } from '../utilities/GlobalStyle';\r\nimport { renameFiles } from '../api/API';\r\nimport { favorites$, toggleFavorite } from \"../Observables/Store\";\r\n\r\nconst Container = styled.div`\r\n  position: fixed;\r\n  width: 370px;\r\n  height: 150px;\r\n  left: 50%;\r\n  margin-left: -185px;\r\n  top: 50%;\r\n  margin-top: -75px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  text-align: center;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n\r\n  footer {\r\n    display: flex;\r\n    justify-content: space-around;\r\n  }\r\n\r\n  .btn {\r\n    width: 100px;\r\n    height: 40px;\r\n    margin-bottom: 10px;\r\n    border: 0.5px solid gray;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .cancel {\r\n    background-color: white;\r\n  }\r\n\r\n  .rename {\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n  }\r\n\r\n  p {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  input[type=\"text\"] {\r\n    margin-bottom: 20px;\r\n  }\r\n`;\r\n\r\nconst PortalRename = ({ displayRename, file }) => {\r\n  const [input, setInput] = useState('');\r\n\r\n  const inputRef = useRef(null);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    const subsription = favorites$.subscribe();\r\n    return () => subsription.unsubscribe;\r\n  }, [])\r\n\r\n  const displayNotification = (boolean) => {\r\n    displayRename(boolean)\r\n  }\r\n\r\n  const onChange = (e) => {\r\n    setInput(e.target.value)\r\n  }\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    renameFiles(file.path_lower, input, token)\r\n      .then(() => {\r\n\r\n        displayNotification(false);\r\n      })\r\n      .catch(data => {\r\n        console.log(data);\r\n        displayNotification(false);\r\n      })\r\n    toggleFavorite(file);\r\n  }\r\n\r\n  return ReactDOM.createPortal(\r\n    <Container>\r\n      <GlobalStyle mask={true} />\r\n      <header>\r\n        <p>Rename the selected item</p>\r\n      </header>\r\n      <form onSubmit={onSubmit}>\r\n        <main>\r\n          <input ref={inputRef} placeholder=\"new name...\" type=\"text\" onChange={onChange} value={input} />\r\n        </main>\r\n        <footer>\r\n          <input type=\"button\" className=\"btn cancel\" value=\"cancel\" onClick={() => displayNotification(false)} />\r\n          <input type=\"button\" className=\"btn rename\" value=\"rename\" onClick={onSubmit} />\r\n        </footer>\r\n      </form>\r\n    </Container>,\r\n    document.getElementById('portal-rename')\r\n  )\r\n}\r\n\r\nexport default PortalRename;","import React, { useState, useEffect, useRef } from 'react'\r\nimport styled from \"styled-components\";\r\n\r\nimport DropdownItems from './DropdownItems';\r\nimport CopyFile from \"./PortalCopy\";\r\nimport PortalDelete from './PortalDelete';\r\nimport PortalRename from './PortalRename';\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  color: #637282;\r\n  padding: 0px 15px;\r\n\r\n  .meny {\r\n    border-radius: 4px;\r\n    border: 2px solid transparent;\r\n  }\r\n`;\r\n\r\nexport default function FileItemDropdown({ file }) {\r\n  const [dropdown, setDropdown] = useState(false);\r\n  const [deleteFiles, setDeleteFiles] = useState(false);\r\n  const [rename, setRename] = useState(false);\r\n  const [copy, setCopy] = useState(false);\r\n  const [move, setMove] = useState(false);\r\n\r\n  const clickedEl = useRef(null);\r\n\r\n  const onClick = () => {\r\n    setDropdown(!dropdown)\r\n\r\n    if (deleteFiles || copy || move || rename) {\r\n      setDropdown(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n      document.addEventListener('click', (e) => clickedInside(e))\r\n    return () => {\r\n      document.removeEventListener('click', (e) => clickedInside(e))\r\n    };\r\n  }, [])\r\n\r\n  const clickedInside = (e) => {\r\n    if (clickedEl.current) {\r\n      if (!clickedEl.current.contains(e.target)) {\r\n        setDropdown(false)\r\n      } \r\n    }\r\n  }\r\n\r\n  const displayDelete = (boolean) => {\r\n    setDeleteFiles(boolean)\r\n  }\r\n\r\n  const displayRename = (boolean) => {\r\n    setRename(boolean);\r\n  }\r\n\r\n  const displayCopy = (boolean) => {\r\n    setCopy(boolean)\r\n  }\r\n\r\n  const displayMove = (boolean) => {\r\n    setMove(boolean)\r\n  }\r\n\r\n  return (\r\n    <Container ref={clickedEl} onClick={(e) => onClick(e)}>\r\n      { deleteFiles ? <PortalDelete file={file} displayDelete={displayDelete} /> : null }\r\n      { dropdown ? <DropdownItems file={file} displayDelete={displayDelete} displayRename={displayRename} displayCopy={displayCopy} displayMove={displayMove}/> : null}\r\n      { copy ? <CopyFile file={file} copy={true} displayCopy={displayCopy} /> : null }\r\n      { rename ? <PortalRename file={file} displayRename={displayRename} /> : null }\r\n      { move ? <CopyFile file={file} copy={false} displayCopy={displayMove} /> : null }\r\n      <i className=\"material-icons meny\">more_horiz</i>\r\n    </Container>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Star, StarBorder } from '@material-ui/icons';\r\nimport { BrowserRouter, Router, Link } from \"react-router-dom\";\r\n\r\nimport { filterOutIconsToRender } from \"../utilities/FilterOutIconsToRender\";\r\nimport FileItemDropdown from './FileItemDropdown';\r\nimport { getFilesMetadata, getFilesThumbnail } from \"../api/API\";\r\nimport { convertToHumanReadableSize, convertToHumanReadableTime } from '../utilities';\r\nimport { toggleFavorite, favorites$ } from \"../Observables/Store\";\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n\r\n    \r\n\r\n    :first-child > div {\r\n        border-top: 1px solid #e6e8eb;\r\n    }\r\n\r\n    .flex-container {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        width: 100%;\r\n        margin: 0px 50px;\r\n        border-bottom: 1px solid #e6e8eb;\r\n        color: #202020;\r\n        box-sizing: border-box;\r\n        transition: all 0.1s ease-in;\r\n        :hover {\r\n            cursor: ${props => props.isFolderIcon === \"folder\" ? \"pointer\" : \"default\"};\r\n            color: #92ceff;\r\n            background-color: rgb(153, 198, 224, 0.1);\r\n        }\r\n\r\n\r\n        :hover > div:last-child .meny {\r\n            border: 2px solid #637282;\r\n\r\n            :hover {\r\n                border: 2px solid #92ceff;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n    }\r\n\r\n    .left-content {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: flex-start;\r\n    }\r\n\r\n    .right-content {\r\n        position: relative;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .icon-container {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .data-format {\r\n        font-size: 35px;\r\n        padding-left: 12px;\r\n        color: ${props => props.isFolderIcon === 'folder' ? '#92ceff' : '#ACC2CC'};\r\n    }\r\n\r\n    .name-cont {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        padding: 0px 15px;\r\n    }\r\n\r\n    .file-star-container {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: flex-start;\r\n        padding-top: 10px;\r\n    }\r\n\r\n    .metadata {\r\n        color: #637282;\r\n        font-size: 12px;\r\n    }\r\n\r\n    .date {\r\n        padding-right: 15px;\r\n    }\r\n\r\n    .file {\r\n        margin-right: 5px;\r\n        color: #202020;\r\n        :hover {\r\n            color: #92ceff;\r\n        }\r\n    }\r\n\r\n    .star {\r\n        hover:\r\n        cursor: pointer;\r\n    }\r\n\r\n    .meny-container {\r\n        justify-content: flex-end;\r\n    }\r\n\r\n    p {\r\n        margin-block-start: 0em;\r\n        margin-block-end: 0em;\r\n    }\r\n\r\n    a {\r\n        text-decoration: none;\r\n\r\n        :link,\r\n        :visited {\r\n            color: black;\r\n        }\r\n\r\n        :hover {\r\n            color: #92ceff;\r\n        }\r\n    }\r\n`\r\n\r\nfunction FileItem({ pathname, children, path, getPath, tag, name, file, token, changeURL }) {\r\n    const [starState, updateStarState] = useState(false);\r\n    const [modified, setModified] = useState(0);\r\n    const [size, setSize] = useState('');\r\n    const [url, updateUrl] = useState('');\r\n    const [starred, updateStar] = useState('');\r\n\r\n\r\n    useEffect(() => {\r\n        let unmounted = false;\r\n\r\n        getFilesMetadata(path, token)\r\n            .then(metadata => {\r\n                if (!unmounted) {\r\n                    setModified(metadata.server_modified);\r\n                    setSize(metadata.size);\r\n                }\r\n            })\r\n\r\n        if (dataFormat === 'jpg' || dataFormat === 'jpeg' || dataFormat === 'png' || dataFormat === 'gif' || dataFormat === 'svg' || dataFormat === 'bmp' || dataFormat === 'webp') {\r\n            getFilesThumbnail(path, token)\r\n                .then(res => {\r\n                    updateUrl(window.URL.createObjectURL(res.fileBlob))\r\n                })\r\n\r\n        }\r\n\r\n        return () => {\r\n            unmounted = true;\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (favorites$.value.find(x => x.id === file.id)) {\r\n            updateStarState(true);\r\n        }\r\n\r\n        const subscription = favorites$.subscribe(updateStar);\r\n        return () => subscription.unsubscribe();\r\n\r\n    }, [favorites$.value])\r\n\r\n    let dataFormat = name.substring(name.lastIndexOf('.') + 1, name.length);\r\n\r\n    function toggleCheck(file) {\r\n        toggleFavorite(file); //Takes file from prop.\r\n        updateStarState(!starState);\r\n    }\r\n\r\n    function onClick(e) {\r\n        if (tag === \"folder\") {\r\n            getPath(path);\r\n        }\r\n    }\r\n\r\n    function iconsToRender(tag, name) {\r\n        return filterOutIconsToRender(tag, name);\r\n    }\r\n\r\n    let link = \"\";\r\n    if (changeURL) {\r\n        link = tag === \"folder\" ?\r\n            <Link to={\"/home\" + path}><p onClick={onClick} className=\"file\">{children}</p></Link> :\r\n            <div><p onClick={onClick} className=\"file\">{children}</p></div>\r\n    } else {\r\n        link = <div><p onClick={onClick} className=\"file\">{children}</p></div>\r\n    }\r\n\r\n    return (\r\n        <Container isFolderIcon={tag}>\r\n            <div className=\"flex-container\">\r\n                <div className=\"left-content\">\r\n                    <div className=\"icon-container\">\r\n                        {url ? <img src={url} /> : <i className=\"material-icons data-format\">{iconsToRender(tag, name)}</i>}\r\n                    </div>\r\n                    <div className=\"name-cont\">\r\n                        <div className=\"file-star-container\">\r\n                            {link}\r\n                            {starState ? <Star className=\"star\" onClick={() => toggleCheck(file)}></Star> : <StarBorder className=\"star\" onClick={() => toggleCheck(file)}></StarBorder>}\r\n                        </div>\r\n                        <div className=\"metadata-container\">\r\n                            <span className=\"metadata date\">{tag === 'file' ? `Modified: ${convertToHumanReadableTime(modified)}` : null}</span>\r\n                            <span className=\"metadata kilobyte\">{convertToHumanReadableSize(size)}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"right-content\">\r\n                    <FileItemDropdown file={file} />\r\n                </div>\r\n            </div>\r\n        </Container >\r\n    )\r\n}\r\n\r\nexport default FileItem;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport { token$ } from '../Observables/Store';\r\nimport styled from 'styled-components';\r\n\r\nimport UploadProgress from '../components/UploadProgress';\r\nimport { filterOutIconsToRender } from \"../utilities/FilterOutIconsToRender\";\r\nimport { filesListFolder, fetchDataFromUser } from \"../api/API\";\r\nimport LoadingCircle from \"../components/LoadingCircle\"\r\n\r\n\r\nimport FileItem from \"../components/FileItem\";\r\n\r\nconst Container = styled.aside`\r\n  .shadow{\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: ${props=>props.width + 'px'};\r\n    height: 100%;\r\n    background-color: rgba(14, 37, 52, 0.15);\r\n    z-index: 1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .row{\r\n    display:flex;\r\n  }\r\n  .column{\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .left{\r\n    margin-left: 20px;\r\n  }\r\n  .input{\r\n    width: 90%;\r\n    padding: 5px;\r\n    border: 1px solid black;\r\n    border-radius: 5px;\r\n  }\r\n  .miniTitle{\r\n    margin-bottom: 5px;\r\n    color: grey;\r\n    font-size: 14px;\r\n  }\r\n  .border{\r\n    width: 400px;\r\n    height: 500px;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n  }\r\n  .icon-container{\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .data-format {\r\n    font-size: 35px;\r\n    padding-left: 12px;\r\n    color: #92ceff;\r\n    margin-top: 15px;\r\n    margin-left: 8px;\r\n    margin-right: 10px;\r\n  }\r\n  .myFooter{\r\n    display:flex;\r\n    jusitfy-content: flex-start;\r\n    align-items: center;\r\n    width:100%;\r\n    height: 60px;\r\n    position: relative;\r\n    border-radius: 0px 0px 10px 10px;\r\n    border-top: 1px solid rgba(222, 222, 222, 1);\r\n    background-color: rgba(245, 245, 245, 1);\r\n    z-index: 2;\r\n  }\r\n  .btn{\r\n    width: 100px;\r\n    height: 40px;\r\n    margin-left: 10px;\r\n    border: 0.5px solid gray;\r\n    border-radius: 10px;\r\n  }\r\n  .cancel{\r\n    margin-left: 180px;\r\n    background-color: white;\r\n  }\r\n  .upload{\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n    margin-right: 15px;\r\n  }\r\n  .overFlow{\r\n    position: relative;\r\n    overflow-y:scroll;\r\n    overflow-x:hidden;\r\n    height: 280px;\r\n    display:flex;\r\n    flex-direction: column;\r\n  }\r\n  .center{\r\n    height: 280px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .flex-container {\r\n    margin-left: 0px;\r\n    margin-right: 0px;\r\n  }\r\n  .metadata-container{\r\n    display:none;\r\n  }\r\n  .right-content{\r\n    display:none;\r\n  }\r\n  .MuiSvgIcon-root{\r\n    display:none;\r\n  }\r\n`;\r\n\r\nfunction UploadFile(props){\r\n  const [file, updateFile] = useState(null);\r\n  const [largeFileUpload, updateLargeFileUpload] = useState(false);\r\n  const [idx, setIdx] = useState(0);\r\n  const [info, setInfo] = useState({name: '', size: ''});\r\n  const [items, setItems] = useState(0);\r\n  const [uploadedSize, setUploadedSize] = useState(0);\r\n  const [uploadDone, setUploadDone] = useState(false)\r\n  const [displayDone, setDisplayDone] = useState(false);\r\n  const [state, updateState] = useState({\r\n    files: [],\r\n  })\r\n  let path = window.location.pathname.substring(5);\r\n  const [usepath, updatePath] = useState(path);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n      setLoading(true);\r\n      fetchDataFromUser(token$.value)\r\n          .then((response) => {\r\n              updateState({\r\n                  files: response,\r\n              })\r\n          })\r\n          .then((repsonse) => {\r\n            setLoading(false);\r\n          })\r\n          .catch((err) => {\r\n              console.error(err);\r\n          })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n  }, [path]);\r\n\r\n  function handlePath(usepath) {\r\n      setLoading(true);\r\n      filesListFolder(token$.value, usepath)\r\n          .then((response) => {\r\n              updateState({\r\n                  files: response.entries\r\n              })\r\n              updatePath(usepath)\r\n          })\r\n          .catch((err) => {\r\n              console.error(err);\r\n          })\r\n          .finally(() => {\r\n            setLoading(false);\r\n          })\r\n  }\r\n\r\n  const upload_Size_Limit = 150*1024*1024;\r\n  let maxBlob = 8 * 1000 * 1000;\r\n\r\n  const handleItem= (e) =>{\r\n    updateFile(e.target.files[0]);\r\n\r\n  }\r\n\r\n  const handleUpload= (e) =>{\r\n    const dropbox = new Dropbox({ accessToken: token$.value, fetch });\r\n    if(file === null) return;\r\n    if(file.size < upload_Size_Limit){  // file is smaller then 150Mb- use filesUpload API\r\n      maxBlob = 8 * 10* 10;\r\n      };\r\n    let workItems = [];\r\n    let offset = 0;\r\n    updateLargeFileUpload(true);\r\n    setInfo({ name: file.name, size: file.size });\r\n      while (offset < file.size) {\r\n        let chunkSize = Math.min(maxBlob, file.size - offset);\r\n        workItems.push(file.slice(offset, offset + chunkSize));\r\n        offset += chunkSize;\r\n      }\r\n\r\n      const task = workItems.reduce((acc, blob, idx, items) => {\r\n        if (idx === 0) {\r\n          return acc.then(() => {\r\n            return dropbox\r\n              .filesUploadSessionStart({ close: false, contents: blob })\r\n              .then((response) => {\r\n                setIdx(idx);\r\n                setItems(items.length);\r\n\r\n                return response.session_id;\r\n              });\r\n          });\r\n        } else if (idx < items.length - 1) {\r\n          return acc.then((sessionId) => {\r\n            var cursor = { session_id: sessionId, offset: idx * maxBlob };\r\n            return dropbox.filesUploadSessionAppendV2({ cursor: cursor, close: false, contents: blob })\r\n              .then(() => {\r\n                setIdx(idx);\r\n                setUploadedSize((idx * maxBlob * 0.001));\r\n                return sessionId;\r\n              });\r\n          });\r\n        } else {\r\n          return acc.then(function(sessionId) {\r\n            var cursor = { session_id: sessionId, offset: file.size - blob.size };\r\n            var commit = { path: usepath + '/' + file.name, mode: \"add\", autorename: true, mute: false };\r\n            return dropbox.filesUploadSessionFinish({ cursor: cursor, commit: commit, contents: blob\r\n              })\r\n              .then((res) => {\r\n                setUploadDone(true);\r\n                setDisplayDone(true);\r\n              });\r\n          });\r\n        }\r\n      }, Promise.resolve());\r\n\r\n      task.catch((error) => {\r\n        console.error(error);\r\n      });\r\n\r\n    return false;\r\n  };\r\n\r\n  function onReturn(path){\r\n    let splittedPath = path.split(\"/\");\r\n    let newPath = \"\";\r\n    for(let i = 1; i < splittedPath.length - 1; i++){\r\n      if(i !== splittedPath.length || splittedPath !== \"\"){\r\n        newPath += \"/\" + splittedPath[i];\r\n      }\r\n    }\r\n    console.log(newPath);\r\n    handlePath(newPath)\r\n    updatePath(newPath);\r\n  }\r\n\r\n  let loadingReturn;\r\n  if(loading){\r\n    loadingReturn = (<div className=\"center\"><LoadingCircle scale={1} /></div>)\r\n  }else{\r\n    loadingReturn = (<div className=\"overFlow\">\r\n    {state.files.filter((file) => file[\".tag\"] === \"folder\").map((x) => {\r\n          return <FileItem\r\n              files={state.files}\r\n              tag={x['.tag']}\r\n              getPath={handlePath}\r\n              path={x.path_lower}\r\n              file={x}\r\n              id={x.id}\r\n              key={x.id}\r\n              name={x.name}\r\n              token={token$.value}\r\n              changeURL={false}\r\n          >{x.name}\r\n\r\n          </FileItem>;\r\n      })}\r\n  </div>)\r\n  }\r\n\r\n  return (\r\n    <Container width={window.innerWidth}>\r\n      {largeFileUpload ? <UploadProgress\r\n        largeFileUpload={largeFileUpload}\r\n        info={info}\r\n        idx={idx}\r\n        setIdx={setIdx}\r\n        items={items}\r\n        uploadedSize={uploadedSize}\r\n        uploadDone={uploadDone}\r\n        setUploadDone={setUploadDone}\r\n        displayDone={displayDone}\r\n        setDisplayDone={setDisplayDone}\r\n        /> : <div className=\"shadow\">\r\n          <div className=\"border\">\r\n            <header className=\"row\">\r\n              <i className=\"material-icons data-format folderIcon\">{filterOutIconsToRender(\"\", \"\")}</i>\r\n              <h3>Upload file</h3>\r\n            </header>\r\n            <div className=\"column left\">\r\n              <div>\r\n                <p className=\"miniTitle\">Name</p>\r\n                <input\r\n                  type='file'\r\n                  onChange={handleItem}\r\n                  multiple\r\n                  />\r\n              </div>\r\n              <div>\r\n                <p className=\"miniTitle\">Location : Dropbox/home{usepath.replace(/%20/g,\" \")}</p>\r\n                {loadingReturn}\r\n              </div>\r\n            </div>\r\n            <footer className=\"myFooter\">\r\n              <button className=\"btn return\" onClick={(e) => onReturn(usepath)}>Return</button>\r\n              <button className=\"btn cancel\" onClick={props.toggleModal}>Cancel</button>\r\n              <button className=\"btn upload\" onClick={handleUpload}>Upload</button>\r\n            </footer>\r\n          </div>\r\n        </div>}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default UploadFile;\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\n\r\nimport { updateToken, removeStarItems } from '../Observables/Store';\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  color: #0070e0;\r\n  position: absolute;\r\n  bottom: 0;\r\n\r\n  h3:hover {\r\n    color: #92ceff;\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nfunction onClick() {\r\n  updateToken(null)\r\n  removeStarItems();\r\n}\r\n\r\nconst LogoutButton = () => {\r\n  return (\r\n    <Container onClick={onClick}>\r\n      <h3>Logout <i className=\"fa fa-sign-out\" aria-hidden=\"true\"></i></h3>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default LogoutButton;","import React, { useState, useEffect } from \"react\";\r\nimport styled from 'styled-components';\r\nimport { Dropbox } from 'dropbox';\r\n\r\nimport { filterOutIconsToRender } from \"../utilities/FilterOutIconsToRender\";\r\nimport { filesListFolder, fetchDataFromUser } from \"../api/API\";\r\nimport { token$ } from '../Observables/Store';\r\n\r\nimport FileItem from \"../components/FileItem\";\r\nimport LoadingCircle from \"./LoadingCircle\";\r\n\r\nconst Container = styled.aside`\r\n  .shadow{\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: ${props=>props.width + \"px\"};\r\n    height: 100%;\r\n    background-color: rgba(14, 37, 52, 0.15);\r\n    z-index: 1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .row{\r\n    display:flex;\r\n  }\r\n  .column{\r\n    display:flex;\r\n    flex-direction: column;\r\n  }\r\n  .left{\r\n    margin-left: 20px;\r\n  }\r\n  .input{\r\n    width: 90%;\r\n    padding: 5px;\r\n    border: 1px solid black;\r\n    border-radius: 5px;\r\n  }\r\n  .miniTitle{\r\n    margin-bottom:5px;\r\n    color: gray;\r\n    font-size: 14px;\r\n  }\r\n  .border{\r\n    width: 400px;\r\n    height: 500px;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n  }\r\n  .icon-container {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .data-format {\r\n    font-size: 35px;\r\n    padding-left: 12px;\r\n    color: #92ceff;\r\n    margin-top: 15px;\r\n    margin-left: 8px;\r\n    margin-right: 10px;\r\n  }\r\n  .myFooter{\r\n    display:flex;\r\n    jusitfy-content: flex-start;\r\n    align-items: center;\r\n    width:100%;\r\n    height: 60px;\r\n    position: relative;\r\n    border-radius: 0px 0px 10px 10px;\r\n    border-top: 1px solid rgba(222, 222, 222, 1);\r\n    background-color: rgba(245, 245, 245, 1);\r\n    z-index: 2;\r\n  }\r\n  .btn{\r\n    width: 100px;\r\n    height: 40px;\r\n    margin-left: 10px;\r\n    border: 0.5px solid gray;\r\n    border-radius: 10px;\r\n  }\r\n  .cancel{\r\n    margin-left: 180px;\r\n    background-color: white;\r\n  }\r\n  .create{\r\n    background-color: rgba(41, 116, 255, 1);\r\n    border: 0px;\r\n    color: white;\r\n    margin-right: 15px;\r\n  }\r\n  .overFlow{\r\n    position: relative;\r\n    overflow-y:scroll;\r\n    overflow-x:hidden;\r\n    height: 280px;\r\n    display:flex;\r\n    flex-direction: column;\r\n  }\r\n  .center{\r\n    height: 280px;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .flex-container {\r\n    margin-left: 0px;\r\n    margin-right: 0px;\r\n  }\r\n  .metadata-container{\r\n    display:none;\r\n  }\r\n  .right-content{\r\n    display:none;\r\n  }\r\n  .MuiSvgIcon-root{\r\n    display:none;\r\n  }\r\n`;\r\n\r\nfunction NewFolder(props){\r\n  const [token, setToken] = useState(token$.value);\r\n  const [inputName, setInputName] = useState(\"\");\r\n  const [state, updateState] = useState({\r\n    files: [],\r\n  })\r\n  const [loading, setLoading] = useState(true);\r\n  const [path, updatePath] = useState(\"/\");\r\n  const [error, setError] = useState(false);\r\n  console.log(\"PATH! \", path);\r\n  useEffect(() => {\r\n    const subscription = token$.subscribe(setToken);\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n      setLoading(true);\r\n      fetchDataFromUser(token)\r\n          .then((response) => {\r\n              /* console.log(response) */\r\n              updateState({\r\n                  files: response,\r\n              })\r\n              setLoading(false);\r\n          }).catch((err) => {\r\n              console.error(err);\r\n          })\r\n  }, [])\r\n\r\n  function handlePath(path) {\r\n      console.log(\"SHOULD LOAD\")\r\n      setLoading(true);\r\n      filesListFolder(token, path)\r\n          .then((response) => {\r\n              updateState({\r\n                  files: response.entries\r\n              })\r\n              updatePath(path)\r\n          })\r\n          .catch((err) => {\r\n              console.error(err);\r\n          })\r\n          .finally(() => {\r\n            setLoading(false);\r\n          })\r\n\r\n  }\r\n\r\n  function folderNameChange(e){\r\n    setInputName(e.target.value);\r\n  }\r\n\r\n  function onCreateFolder(){\r\n    setLoading(true);\r\n    const dbx = new Dropbox({ accessToken: token, fetch});\r\n    console.log(path);\r\n    if(path === \"/\"){\r\n      dbx.filesCreateFolder({path : path + inputName})\r\n      .then(() => {\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        props.onClickToggle();\r\n      })\r\n    }else{\r\n      dbx.filesCreateFolder({path : path + \"/\" + inputName})\r\n      .then(() => {\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setError(true);\r\n      })\r\n      .finally(() => {\r\n        props.onClickToggle();\r\n      })\r\n    }\r\n  }\r\n\r\n  function onReturn(path){\r\n    let splittedPath = path.split(\"/\");\r\n    let newPath = \"\";\r\n    for(let i = 1; i < splittedPath.length - 1; i++){\r\n      if(i !== splittedPath.length || splittedPath !== \"\"){\r\n        newPath += \"/\" + splittedPath[i];\r\n      }\r\n    }\r\n    console.log(newPath);\r\n    handlePath(newPath)\r\n    updatePath(newPath);\r\n  }\r\n  let loadingReturn;\r\n  if(loading){\r\n    loadingReturn = (<div className=\"center\"><LoadingCircle scale={1} /></div>)\r\n  }else{\r\n    loadingReturn = (<div className=\"overFlow\">\r\n    {state.files.filter((file) => file[\".tag\"] === \"folder\").map((x) => {\r\n          return <FileItem\r\n              files={state.files}\r\n              tag={x['.tag']}\r\n              getPath={handlePath}\r\n              path={x.path_lower}\r\n              file={x}\r\n              id={x.id}\r\n              key={x.id}\r\n              name={x.name}\r\n              token={token}\r\n              changeURL={false}\r\n          >{x.name}\r\n\r\n          </FileItem>;\r\n      })}\r\n  </div>)\r\n  }\r\n\r\n  return (\r\n    <Container width={window.innerWidth}>\r\n      <div className=\"shadow\">\r\n        <div className=\"border\">\r\n          <header className=\"row\">\r\n            <i className=\"material-icons data-format folderIcon\">{filterOutIconsToRender(\"folder\", \"\")}</i>\r\n            <h3>Create folder</h3>\r\n          </header>\r\n          <div className=\"column left\">\r\n            <div>\r\n              <p className=\"miniTitle\">Name</p>\r\n              <input value={inputName} onChange={(e) => folderNameChange(e)} className=\"input\" placeholder=\"Folder name\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"miniTitle\">Location : Dropbox/home{path.replace(/%20/g,\" \")}</p>\r\n              {loadingReturn}\r\n            </div>\r\n          </div>\r\n          <footer className=\"myFooter\">\r\n            <button className=\"btn return\" onClick={(e) => onReturn(path)}>Return</button>\r\n            <button className=\"btn cancel\" onClick={props.onClickToggle}>Cancel</button>\r\n            <button className=\"btn create\" onClick={onCreateFolder}>Create</button>\r\n          </footer>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default NewFolder;\r\n\r\n\r\n// INTE SLASH OCH INTE %20\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components';\r\nimport UploadFile from '../components/UploadFile';\r\n\r\nimport LogoutButton from './LogoutButton';\r\nimport NewFolder from \"./NewFolder\";\r\n\r\nconst Container = styled.aside`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 2;\r\n  height: 100vh;\r\n  max-width: 200px;\r\n  position: sticky;\r\n  top: 0;\r\n  left: 0;\r\n  background-color: #f7f9fa;\r\n  color: #202020;\r\n\r\n  .header {\r\n    margin-top: 15px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: left;\r\n    margin-left: 15px;\r\n  }\r\n\r\n  .footer {\r\n    height:0px;\r\n    display: flex;\r\n    justify-content: left;\r\n    margin-left: 20px;\r\n  }\r\n\r\n  h3 {\r\n    cursor: pointer;\r\n    color: #0070e0;\r\n    :hover {\r\n      color: #92ceff;\r\n    }\r\n  }\r\n  \r\n  .item:hover {\r\n    text-decoration: underline;\r\n  }\r\n  .item {\r\n    margin: 5px;\r\n  }\r\n  .logo {\r\n    font-size: 45px;\r\n    color: #0070e0;\r\n    margin-left: 15px;\r\n    margin-top: 20px;\r\n  }\r\n  .line{\r\n    margin-left: 5%;\r\n    width: 90%;\r\n    border-top: 1.5px solid #e6e8eb;\r\n  }\r\n  .lineBot{\r\n    position: absolute;\r\n    bottom: 65px;\r\n    margin-left: 5%;\r\n    width: 90%;\r\n    border-top: 1.5px solid #e6e8eb;\r\n  }\r\n`;\r\n\r\nfunction SideBar() {\r\n  const [newFolder, setNewFolder] = useState(false);\r\n  const [toggle, updateToggle] = useState(false);\r\n\r\n  const onFolderClick = (e) => {\r\n    setNewFolder(!newFolder);\r\n  }\r\n\r\n  const handleToggle = () => {\r\n    updateToggle(!toggle)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <div className=\"superHeader\">\r\n        <i className=\"logo fab fa-dropbox\"></i>\r\n      </div>\r\n      <div className=\"header\">\r\n        <div>\r\n          <h3 className=\"item\" onClick={onFolderClick}>New folder <i className=\"fas fa-folder-plus\"></i></h3>\r\n          {newFolder ? <NewFolder onClickToggle={onFolderClick} /> : <div></div>}\r\n        </div>\r\n        <h3 className=\"item\" onClick={handleToggle}>Upload file <i className=\"fas fa-file-upload\"></i></h3>\r\n      </div>\r\n      <div className=\"line\"></div>\r\n      <div className=\"lineBot\"></div>\r\n      <div className=\"footer\">\r\n        <LogoutButton />\r\n      </div>\r\n      {toggle ? <UploadFile toggleModal={handleToggle} toggle={toggle} /> : null}\r\n    </Container >\r\n\r\n  )\r\n}\r\n\r\nexport default SideBar;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { addPathForEach, firstLetterCapital } from \"../utilities\"\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  .cont {\r\n    display: flex;\r\n    \r\n    :first-child {\r\n      margin-left: 62px;\r\n    }\r\n  }\r\n\r\n  .breadCrumb {\r\n    font-size: 18px;\r\n    color: #637282;\r\n    text-decoration: none;\r\n    margin: 16px 0px 16px 0px;\r\n    display: flex;\r\n    align-self: center;\r\n    \r\n\r\n    :hover {\r\n      cursor: pointer;\r\n      text-decoration: underline;\r\n    }\r\n\r\n    :last-child {\r\n      color: black;\r\n    }\r\n  }\r\n\r\n  .arrow {\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n    font-size: 16px;\r\n    display: flex;\r\n    align-self: center;\r\n    color: #637282;\r\n    font-weight: bold;\r\n\r\n  }\r\n\r\n\r\n`\r\n\r\nfunction BreadCrumbs({ path }) {\r\n  return (\r\n    <Container>\r\n      {addPathForEach(path).map((crumb, i) => {\r\n        return <div key={i} className=\"cont\">\r\n          <Link className=\"breadCrumb\" to={crumb.path}>{firstLetterCapital(crumb.part)}</Link>\r\n          {i === addPathForEach(path).length - 1 ? null : <p className=\"arrow\"> > </p>}\r\n        </div>\r\n      })}\r\n    </Container >\r\n  )\r\n}\r\n\r\nexport default BreadCrumbs;","import React, { useState, useEffect } from \"react\";\r\nimport { Router, Link } from \"react-router-dom\";\r\n\r\nimport { filesListFolder, checkChanges, getCursor } from \"../api/API\";\r\nimport FileItem from \"./FileItem\";\r\nimport BreadCrumbs from \"./BreadCrumbs\";\r\nimport LoadingCircle from \"./LoadingCircle\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.aside`\r\n    .center{\r\n        margin-top: 200px;\r\n    }\r\n    .empty {\r\n        margin: 0px 62px 0px 62px;\r\n        color: #637282;\r\n        font-size: 14px;\r\n        font-style: italic;\r\n    }\r\n`\r\n// style på favorites, kolla margin o paddings.\r\n// Metadatabugg på favorites, ev props. oklart när det händer..\r\nfunction FileList({ token, pathname, list }) {\r\n    const [state, updateState] = useState({\r\n        files: [],\r\n    })\r\n    const [path, updatePath] = useState(\"\");\r\n    const [loading, setLoading] = useState(true);\r\n    const [cursor, updateCursor] = useState(\"\");\r\n    const [changes, updateChanges] = useState(false);\r\n\r\n    console.log('hela komponenten updateras!!!!!')\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n\r\n        filesListFolder(token, pathname.substring(5))\r\n            .then((response) => {\r\n                //  console.log(\"LOCATION ÄNDRADES\", pathname.substring(5));\r\n                if (list.length > 0) {\r\n                    updateState({\r\n                        files: list\r\n                    })\r\n                } else {\r\n                    updateState({\r\n                        files: response.entries\r\n                    })\r\n                }\r\n                updateCursor(response.cursor);\r\n\r\n                updatePath(path)\r\n\r\n\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n            })\r\n            .finally(() => {\r\n                setLoading(false);\r\n            });\r\n\r\n\r\n\r\n    }, [pathname, list]);\r\n\r\n    useEffect(() => {\r\n        const longpoll = () => {\r\n            getCursor(token, path)\r\n                .then((response) => {\r\n                    updateCursor(response.cursor);\r\n                    return response.cursor;\r\n                })\r\n                .then(cursor => {\r\n                    checkChanges(cursor, 30, token)\r\n                        .then((response) => {\r\n                            if (response.changes) {\r\n                                console.log(path + '  <-- pathen!')\r\n                                return filesListFolder(token, window.location.pathname.substring(5));\r\n                            } else {\r\n                                getCursor(token, path);\r\n                            }\r\n                        })\r\n                        .then(response => {\r\n                            if (response) {\r\n                                updateCursor(response.cursor);\r\n                                updateState({ files: response.entries })\r\n                                longpoll()\r\n                            } else {\r\n                                longpoll()\r\n                            }\r\n                        })\r\n                        .catch(err => console.log(err))\r\n                })\r\n        }\r\n        longpoll();\r\n    }, [])\r\n\r\n    function handlePath(path) {\r\n        setLoading(true);\r\n        filesListFolder(token, path)\r\n            .then((response) => {\r\n                updateState({\r\n                    files: response.entries\r\n                })\r\n                updatePath(path)\r\n\r\n\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n            })\r\n            .finally(() => {\r\n                setLoading(false);\r\n            })\r\n    }\r\n\r\n    let loadingReturn;\r\n    if (loading) {\r\n        loadingReturn = (<Container><div className=\"center\"><LoadingCircle scale={2} /></div></Container>)\r\n    } else {\r\n        loadingReturn = (<Container><div className=\"cont\" >\r\n            {state.files.length > 0 ?\r\n                state.files.map((x) => {\r\n                    return <FileItem\r\n                        files={state.files}\r\n                        tag={x['.tag']}\r\n                        getPath={handlePath}\r\n                        path={x.path_lower}\r\n                        file={x}\r\n                        id={x.id}\r\n                        key={x.id}\r\n                        name={x.name}\r\n                        token={token}\r\n                        changeURL={true}\r\n                    >{x.name}\r\n\r\n                    </FileItem>;\r\n                }) :\r\n                <p className=\"empty\">This folder is empty.</p>\r\n            }\r\n        </div ></Container>)\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            <div>\r\n                <BreadCrumbs getPath={handlePath} path={pathname}></BreadCrumbs>\r\n            </div>\r\n\r\n            {loadingReturn}\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default FileList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { favorites$ } from '../Observables/Store';\r\nimport styled from \"styled-components\";\r\n\r\nimport FileItem from \"../components/FileItem\";\r\nimport { filesListFolder } from \"../api/API\";\r\n\r\n\r\nconst Container = styled.section`\r\n\r\nmargin-bottom: 36px;\r\n\r\n.title-cont {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 0px 62px 0px 62px;\r\n\r\n}\r\n\r\nh3 {\r\n  color: #0070e0;\r\n\r\n}\r\n.fav-toggle {\r\n  display: flex;\r\n  align-self: center;\r\n  :hover {\r\n    cursor: pointer;\r\n    text-decoration: underline;\r\n  }\r\n}\r\n\r\n.no-fav {\r\n  margin: 0px 62px 0px 62px;\r\n  color: #637282;\r\n  font-size: 14px;\r\n  font-style: italic;\r\n}\r\n`\r\n\r\n\r\n// Utan de ska kolla av från favorites$.value och se om den är med eller inte.\r\nexport default function Favorites({ token, pathname }) {\r\n\r\n  const [starItems, updateStarItems] = useState(favorites$.value);\r\n  const [toggleStar, updateToggle] = useState(false);\r\n  const [path, updatePath] = useState(\"\");\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const subscription = favorites$.subscribe(updateStarItems);\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [])\r\n\r\n\r\n\r\n  function handlePath(path) {\r\n    filesListFolder(token, path)\r\n      .then((response) => {\r\n        updatePath(path)\r\n\r\n\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      })\r\n\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <div className=\"title-cont\">\r\n        <h3 className=\"fav-title\">Favorites<i className=\"fas fa-star\"></i></h3>\r\n        {toggleStar ?\r\n          <p onClick={() => updateToggle(!toggleStar)} className=\"fav-toggle\">Hide favorites</p> :\r\n          <p onClick={() => updateToggle(!toggleStar)} className=\"fav-toggle\">Show favorites</p>}\r\n      </div>\r\n\r\n      {toggleStar ?\r\n        <div className=\"fav-items\">\r\n\r\n          {favorites$.value.length > 0 ?\r\n            starItems.map((x) => {\r\n\r\n              return <FileItem\r\n                /* files={state.files} */\r\n                tag={x['.tag']}\r\n                getPath={handlePath}\r\n                path={x.path_lower}\r\n                file={x}\r\n                id={x.id}\r\n                key={x.id}\r\n                name={x.name}\r\n                token={token}\r\n                changeURL={true}\r\n              >{x.name}\r\n\r\n              </FileItem>;\r\n            }) :\r\n            <p className=\"no-fav\">You have no favorites. Add a favorite using the star next to your file.</p>\r\n          }\r\n\r\n        </div> :\r\n        null\r\n      }\r\n\r\n    </Container>\r\n  );\r\n}","import React, { useEffect, useState, useParams } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { Dropbox } from 'dropbox';\r\nimport { useDebounce } from 'use-debounce';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nimport { token$ } from '../Observables/Store';\r\nimport SideBar from '../components/SideBar';\r\nimport styled from 'styled-components';\r\nimport FileList from \"../components/FileList\";\r\nimport Favorites from \"../components/Favorites\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  main {\r\n    display: flex;\r\n    flex: 4;\r\n    justify-content: flex-start;\r\n    flex-direction: column;\r\n  }\r\n\r\n  h1 {\r\n    margin: 0px 62px;\r\n  }\r\n\r\n  .searchContainer{\r\n    display: flex;\r\n    margin-left: 62px;\r\n    border: 1px solid #c1c7cd;\r\n    color: #25282b;\r\n    border-radius: 25px;\r\n    width: 200px;\r\n    transition: width 0.4s ease-in-out;\r\n  }\r\n\r\n  .searchContainer:focus-within{\r\n    width: 85%;\r\n  }\r\n\r\n  .searchIcon{\r\n    padding: 10px;\r\n  }\r\n\r\n  .searchInput{\r\n    font-size: 18px;\r\n    width: 89%;\r\n    padding 10px, 10px, 10px, 0;\r\n    border: none;\r\n    outline: none;\r\n    border-radius: 25px;\r\n    background: trasparent;\r\n  }\r\n\r\n`;\r\n\r\n/* let { path } = useParams();\r\nconsole.log(path); */\r\n\r\nfunction MainPage({ location, ...props }) {\r\n  //  console.log(\"NEW LOCATION\", location.pathname);\r\n  const [token, setToken] = useState(token$.value);\r\n  const [searchFile, updateSearchFile] = useState('');\r\n  const [list, updateList] = useState([]);\r\n  const [value] = useDebounce(searchFile, 600);\r\n  let searchItems = [];\r\n\r\n  useEffect(() => {\r\n    const dbx = new Dropbox({ accessToken: token$.value, fetch });\r\n    dbx.filesSearch({ path: window.location.pathname.substring(5), query: searchFile })\r\n      .then(res => {\r\n\r\n        res.matches.map(data => searchItems.push(data.metadata));\r\n        updateList(searchItems)\r\n      })\r\n  }, [value])\r\n\r\n  useEffect(() => {\r\n    const subscription = token$.subscribe(setToken);\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  function handleSearch(e) {\r\n    updateSearchFile(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {token ? null : <Redirect to=\"/login\" />}\r\n      <SideBar />\r\n      <main>\r\n        <h1>xX:DRAGON-SLAYERS-53:Xx</h1>\r\n        <div className='searchContainer'>\r\n           <Search className='searchIcon'></Search>\r\n           <input className='searchInput' type='search'  onChange={handleSearch} value={searchFile} placeholder='Search...'/>\r\n        </div>\r\n        <FileList token={token} pathname={location.pathname} list={list}/>\r\n        <Favorites token={token} pathname={location.pathname} />\r\n      </main>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default MainPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { token$ } from '../Observables/Store';\r\nimport styled from 'styled-components';\r\n\r\nimport { fetchAccessesTokenFromUser } from '../api/API';\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n\r\n  header {\r\n    display: flex;\r\n    align-items: center;\r\n    color: black;\r\n  }\r\n\r\n  .fa-dropbox {\r\n    padding: 5px;\r\n    font-size: 30px;\r\n    color: #0062ff;\r\n  }\r\n\r\n  button {\r\n    width: 200px;\r\n    height: 40px;\r\n    outline: none;\r\n    border: none;\r\n    border-radius: 6px;\r\n    color: #fff;\r\n    font-weight: 600;\r\n    background-color: #0062ff;\r\n    cursor: pointer;\r\n\r\n    transition: all 0.4s ease 0s;\r\n\r\n    :hover {\r\n      background-color: #659FFC;\r\n    }\r\n  }\r\n`;\r\n\r\nfunction LoginPage() {\r\n  const [token, setToken] = useState(token$.value);\r\n\r\n  useEffect(() => {\r\n    const subscription = token$.subscribe(setToken);\r\n    return () => subscription.unsubscribe();\r\n  }, [])\r\n\r\n  return (\r\n    <Container>\r\n      <header>\r\n        <i className=\"fab fa-dropbox\"></i>\r\n        <h1>Dropbox Clone</h1>\r\n        <i className=\"fab fa-dropbox\"></i>\r\n      </header>\r\n      {token ? <Redirect to=\"/home\" /> : null}\r\n      <button onClick={() => fetchAccessesTokenFromUser()}>Login with Dropbox</button>\r\n      <footer>\r\n        <span>\r\n          Developed with &nbsp;\r\n          <i className=\"fas fa-heart\"></i>\r\n          &nbsp; love and  &nbsp;\r\n          <i className=\"fas fa-mug-hot\"></i>\r\n          &nbsp;\r\n        </span>\r\n      </footer>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default LoginPage;","export const CLIENT_ID = 'kkq9me3flt129yd';\r\n\r\nexport const PATH_BASENAME = \"Home\";","import React, { useEffect, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport queryString from 'querystring';\r\nimport { updateToken, token$ } from '../Observables/Store';\r\n\r\nfunction Auth() {\r\n  const [token, setToken] = useState('');\r\n\r\n  useEffect(() => {\r\n    const parsedHash = queryString.parse(window.location.hash);\r\n\r\n    updateToken(parsedHash['#access_token'])\r\n\r\n    setToken(token$.value)\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      {token ? <Redirect to=\"/home\" /> : null}\r\n      <h2>AUTH PAGE</h2>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Auth;","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\r\n\r\nimport MainPage from './components/MainPage';\r\nimport LoginPage from './components/LoginPage';\r\nimport Favorites from \"./components/Favorites\";\r\nimport Auth from './components/Auth';\r\nimport { GlobalStyle } from './utilities/GlobalStyle';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <GlobalStyle />\r\n      <Router>\r\n        <Route exact path=\"/\">\r\n          <Redirect to=\"/login\" />\r\n        </Route>\r\n        <Route path=\"/home\" component={MainPage} />\r\n        <Route path=\"/login\" component={LoginPage} />\r\n        <Route path=\"/auth\" component={Auth} />\r\n\r\n      </Router>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}